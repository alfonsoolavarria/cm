{% load static %}
<!DOCTYPE html>
<html lang="en">
	{% include "market/head.html" %}
<body class="animsition">
	{% include "market/header.html" %}
	{% include "market/scripts.html" %}
	<!-- <style>
		search{
			border: 1px solid black;
		}
	</style> -->
	<!-- <style>
	.register{
    background: -webkit-linear-gradient(left, #3931af, #00c6ff);
    margin-top: 3%;
    padding: 3%;
}
.register-left{
    text-align: center;
    color: #fff;
    margin-top: 4%;
}
.register-left input{
    border: none;
    border-radius: 1.5rem;
    padding: 2%;
    width: 60%;
    background: #f8f9fa;
    font-weight: bold;
    color: #383d41;
    margin-top: 30%;
    margin-bottom: 3%;
    cursor: pointer;
}
.register-right{
    background: #f8f9fa;
    border-top-left-radius: 10% 50%;
    border-bottom-left-radius: 10% 50%;
}
.register-left img{
    margin-top: 15%;
    margin-bottom: 5%;
    width: 25%;
    -webkit-animation: mover 2s infinite  alternate;
    animation: mover 1s infinite  alternate;
}
@-webkit-keyframes mover {
    0% { transform: translateY(0); }
    100% { transform: translateY(-20px); }
}
@keyframes mover {
    0% { transform: translateY(0); }
    100% { transform: translateY(-20px); }
}
.register-left p{
    font-weight: lighter;
    padding: 12%;
    margin-top: -9%;
}
.register .register-form{
    padding: 10%;
    margin-top: 10%;
}
.btnRegister{
    float: right;
    margin-top: 10%;
    border: none;
    border-radius: 1.5rem;
    padding: 2%;
    background: #0062cc;
    color: #fff;
    font-weight: 600;
    width: 50%;
    cursor: pointer;
}
.register .nav-tabs{
    margin-top: 3%;
    border: none;
    background: #0062cc;
    border-radius: 1.5rem;
    width: 28%;
    float: right;
}
.register .nav-tabs .nav-link{
    padding: 2%;
    height: 34px;
    font-weight: 600;
    color: #fff;
    border-top-right-radius: 1.5rem;
    border-bottom-right-radius: 1.5rem;
}
.register .nav-tabs .nav-link:hover{
    border: none;
}
.register .nav-tabs .nav-link.active{
    width: 100px;
    color: #0062cc;
    border: 2px solid #0062cc;
    border-top-left-radius: 1.5rem;
    border-bottom-left-radius: 1.5rem;
}
.register-heading{
    text-align: center;
    margin-top: 8%;
    margin-bottom: -15%;
    color: #495057;
}
</style> -->
  <div class="container" style="margin-top:100px;font-size:medium;">
    <div class="row">
       <div class="col-md-12" style="margin-top:20px;margin-bottom:100px;text-align:center;">
         <div class="">
            <img class="" style="width:60px;height:60px;" src="{%static "images/confirmation.png" %}" alt="User Image">
            <h4><b>Criollitos Market le da la bienvenida</b></h4>
            <h5>Administrador <b>{{email}}</b></h5>
         </div>
       </div>
    </div>
  </div>

<!-- <div class="container register">
	<div class="row">
      <div class="col-md-3 register-left">
          <img src="https://image.ibb.co/n7oTvU/logo_white.png" alt=""/>
          <h3>Panel de Administraciòn</h3>
          <p></p>
      </div>
      <div class="col-md-9 register-right">
          <ul class="nav nav-tabs nav-justified" id="myTab" role="tablist">
              <li class="nav-item">
                  <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Productos</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Compras</a>
              </li>
          </ul>
          <div class="tab-content" id="myTabContent">
          	<div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                <h3 class="register-heading">Productos/Editar</h3>
                <div class="row register-form">
                	<div class="col-md-12">
                  	<div class="form-group">
											<label for="inputPlaceholderEx">Ingrese el % (porcentaje) que desea aumentar a los precios</label>
                    	<input type="number" class="form-control" placeholder="% (porcentaje)" value="" required/>
                    </div>

										<input type="submit" class="btnRegister" value="Editar"/>
                  </div>

									<div class="flex-w flex-sb-m p-b-52">
										<div class="flex-w flex-l-m filter-tope-group m-tb-10">
											<button id="allId" class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5 {%if flag == 'all'%}how-active1{%endif%}" data-filter="*">
												<a href="/criollitos/market/admin/all/">Todos los Productos</a>
											</button>

											<button id="viveresId" class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5 {%if flag == 'vive'%}how-active1{%endif%}">
												<a href="/criollitos/market/admin/viveres/">Viveres</a>
											</button>

											<button id="frigorificoId" class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5 {%if flag == 'frigo'%}how-active1{%endif%}" data-filter=".bag">
												<a href="/criollitos/market/admin/frigorifico/">Frigorifico</a>
											</button>

											<button id="enaltadoId" class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5 {%if flag == 'enla'%}how-active1{%endif%}" data-filter=".bag">
												<a href="/criollitos/market/admin/enlatados/">Enlatados</a>
											</button>
										</div>

										<div class="dis-none panel-search w-full p-t-10 p-b-15">
											<div class="bor8 dis-flex p-l-15">
												<button class="size-113 flex-c-m fs-16 cl2 hov-cl1 trans-04">
													<i class="zmdi zmdi-search"></i>
												</button>

												<input class="mtext-107 cl2 size-114 plh2 p-r-15" type="text" name="search-product" placeholder="Search">
											</div>
										</div>
									</div>
									<div class="bs-docs-example">
										<div class="row isotope-grid1">

										{%for value in data%}
						         <div class="col-sm-6 col-md-4 col-lg-3 p-b-35 isotope-item women">
							         <div class="block2">
						             <div class="block2-pic hov-img0">
						               <img style="border-radius:60px;" height="210" width="210" src="{{direction}}{{value.name_image}}" alt="IMG-PRODUCT">

													 {%if value.cant == 0 %}
														 <label style="color:red;" class="block2-btn flex-c-m stext-103 size-102 bg0 bor2 p-lr-15 trans-04">
															 No disponible
														 </label>
													{%endif%}
						             </div>
						             <div class="block2-txt flex-w flex-t p-t-14">
							           	<div class="block2-txt-child1 flex-col-l ">
						             		<label class="stext-104 cl4 hov-cl1 trans-04 js-name-b2">{{value.name}}</label>
						                <span class="stext-105 cl3">
						                  {{value.price}}
						                 </span>
							            </div>
							            <div class="block2-txt-child2 flex-r p-t-3">
						              	<a href="#" class="btn-addwish-b2 dis-block pos-relative js-addwish-b2">
						                </a>
													</div>
							           </div>
						          	</div>
						      		</div>
						    		{%endfor%}
									</div>
									</div>


                </div>

              </div>
            <div class="tab-pane fade show" id="profile" role="tabpanel" aria-labelledby="profile-tab">
              <h3  class="register-heading">Verificaciòn de Compras</h3>
            	<div class="row register-form">
              <div class="col-md-6">
                  <div class="form-group">
                      <input type="text" class="form-control" placeholder="Còdigo de Compra" value="" />
                  </div>

              </div>
              <div class="col-md-6">

                  <input type="submit" class="btnRegister"  value="Buscar" style="margin-top: 0px;"/>
              </div>
            </div>
          </div>
        </div>
      </div>
  </div>

	</div> -->


<!-- Nav bar nuevo Admin -->

<nav class="navbar navbar-expand-lg navbar-dark primary-color mx-auto" style="bottom:30px;width:350px;">
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item active">
        <a class="nav-link" href="#">Cotizacion<span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Productos</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Precios</a>
      </li>
      <li class="nav-item">
        <a class="nav-link disabled" href="#">Disabled</a>
      </li>
    </ul>
  </div>
</nav>

<!-- Fin de Nav bar nuevo -->
<div class="" style="text-align: center;">
	 <img class="" style="width:60px;height:60px;" src="{%static "images/confirmation.png" %}" alt="User Image">
	 <h4><b>Productos</b></h4>
</div>

<table id="productsAdmin" class="display mx-auto table table-striped table-bordered" style="width:90%">
			<thead>
					<tr>
							<th>category</th>
							<th>id</th>
							<th>name</th>
							<th>cant</th>
							<th>description date</th>
							<th>name_image</th>
							<th>price</th>
							<th>pricebs</th>
					</tr>
			</thead>
	</table>
	<div class="" style="text-align: center;">
		 <img class="" style="width:60px;height:60px;" src="{%static "images/confirmation.png" %}" alt="User Image">
		 <h4><b>Cotizacion</b></h4>
	</div>

<table id="cotizaciontable" class="display mx-auto table table-striped table-bordered" style="width:90%">
			<thead>
					<tr>
							<th>category</th>
							<th>id</th>
							<th>name</th>
							<th>cant</th>
							<th>description date</th>
							<th>name_image</th>
							<th>price</th>
							<th>pricebs</th>
					</tr>
			</thead>
	</table>
	<button type='button' id='buttonadd' class='btn btn-danger btn-rounded btn-sm'>Quitar producto seleccionado</button>



    {% include "market/footer.html" %}
    <!-- Back to top -->
    <div class="btn-back-to-top" id="myBtn">
    <span class="symbol-btn-back-to-top">
    	<i class="zmdi zmdi-chevron-up"></i>
    </span>
    </div>
			<script type="text/javascript">
			var editor;
			$(document).ready(function() {

		// 		editor = new $.fn.dataTable.Editor( {
    //     "table": "#cotizaciontable",
    //     "fields": [ {
    //             "label": "category:",
    //             "name": "category"
    //         }, {
    //             "label": "id:",
    //             "name": "id"
    //         }, {
    //             "label": "name:",
    //             "name": "name"
    //         }, {
    //             "label": "cant:",
    //             "name": "cant"
    //         }, {
    //             "label": "description:",
    //             "name": "description"
    //         }, {
    //             "label": "name_image:",
    //             "name": "name_image",
    //             // type: "datetime"
    //         }, {
    //             "label": "price:",
    //             "name": "price"
    //         }, {
    //             "label": "pricebs:",
    //             "name": "pricebs"
    //         }
    //     ]
    // } );
		//
		// // Activate an inline edit on click of a table cell
    // $('#cotizaciontable').on( 'click', 'tbody td:not(:first-child)', function (e) {
    //     editor.inline( this );
    // } )

				var tableCotizacion = $('#cotizaciontable').DataTable({
					// "dom": 'frtipB',
					"dom": 'Bfrtip',
					"buttons": [
            'excel', 'pdf','colvis'
        ],
					"columns": [
							{ "data": "category" },
							{ "data": "id" },
							{ "data": "name" },
							{ "data": "cant" },
							{ "data": "description" },
							{ "data": "name_image" },
							{ "data": "price", render: $.fn.dataTable.render.number( ',', '.', 0, '$' ) },
							{ "data": "pricebs" }
					]
				});

				var table = $('#productsAdmin').DataTable( {
							"ajax": {
				        "url": "all/product/",
				        "dataSrc": 'data'
	    				},
							"columns": [
									{ "data": "category" },
									{ "data": "id" },
									{ "data": "name" },
									{ "data": "cant" },
									{ "data": "description" },
									{ "data": "name_image" },
									{ "data": "price" },
									{ "data": "pricebs" }
							]
					});

					// console.log(table.rows( { selected: true } ).data())
					// $("#productsAdmin_wrapper").width('90%')
					$("#productsAdmin_filter").css('position','inherit')
					$("#productsAdmin_filter").css('left','-80px')
					$("#productsAdmin_filter.label.input").parent().css('border','1px solid black')

					// Selecciona las filas
					$('#productsAdmin tbody').on( 'click', 'tr', function () {
		        if ( $(this).hasClass('selected') ) {
		            $(this).removeClass('selected');
		        }
		        else {
		            table.$('tr.selected').removeClass('selected');
		            $(this).addClass('selected');
								datosadd = tableCotizacion.rows().data();
								listaid = []
								if (datosadd.length>0) {
									for (var i = 0; i < datosadd.length; i++) {
										listaid.push(datosadd[i].id);
										}
										// console.log(listaid);
										if (listaid.includes(table.row( this ).data().id)== false) {
										tableCotizacion.row.add(table.row( this ).data()).draw();
									}
								}else {
									tableCotizacion.row.add(table.row( this ).data()).draw();
								}
		        }
	    		} );

					// Eliminar product cotizado
					$('#cotizaciontable tbody').on( 'click', 'tr', function () {
						if ( $(this).hasClass('selected') ) {
		            $(this).removeClass('selected');
								// $("#buttonadd").remove();
		        }
		        else {
							// $("#buttonadd").remove();
							tableCotizacion.$('tr.selected').removeClass('selected');
							$(this).addClass('selected');
							// $(this).append("")
						}
					});
					$('#buttonadd').click( function () {
						tableCotizacion.row('.selected').remove().draw( false );
					});
			});




			</script>
  </body>
</html>
