$("#selectEnvio").on("change",function(){$("#coen").text(this.value),localStorage.setItem("costoenvio",this.value),localStorage.setItem("lugarenvio",this.options[this.selectedIndex].text),subtotal=$(".subTotalDinamic").text(),nuev_total=parseFloat(subtotal)+parseFloat(this.value),$(".totalDinamicFinal").text(parseFloat(nuev_total).toFixed(2).toString())});var costo=JSON.parse(localStorage.getItem("costoenvio")),lis_cost=[2,3,4,5],lis_lugar=["Bermudez","Urb Centro","Las Acacias","San Ignacio","Los Samanes","Urb Calicanto","Fundacion Mendoza","Zonas Cercanas 1","23 de Enero","La Coromoto","Arsenal","El Limon","Cana de Azucar","Palo Negro","Los Olivos","Av Dr Montoya","Zonas Cercanas 2","La Cabrera Mariara","Turmero","Cagua-Bella Vista","Zonas Cercanas 3","La Victoria"];if(costo)if(-1!=lis_cost.indexOf(costo)){$("#coen").text(costo);var lugar=localStorage.getItem("lugarenvio");lugar&&(-1!=lis_lugar.indexOf(lugar)?$("#selectEnvio option[class='"+lugar+"']").attr("selected","selected"):swal("Lugar incorrecto"," ","warning"))}else swal("Costo incorrecto"," ","warning");function buscaIdIndice(t,a){for(var i=0;i<t.length;i++)if(t[i].id==a)return i;return-1}var listPriceTotal=0,carrito=JSON.parse(localStorage.getItem("carrito"));if(carrito.length<1)$(".wrap-table-shopping-cart").css("visibility","hidden"),$(".wrap-table-shopping-cart").after("<h4 style='text-align:center;'>Aún no hay artículos en su carrito, anda y <a href='/all'>compra</a></h4>"),$("#paymentBox").remove();else{for(var i=0;i<carrito.length;i++)$("#dinamicItems").after("<tr class='table_row'>        <td class='column-1'>          <div class='how-itemcart1' onclick='return removeItems(this,"+carrito[i].id+")' id='removeItems-"+carrito[i].id+"'>            <img src='"+carrito[i].image+"' alt='IMG'>          </div>        </td>        <td class='column-2'>"+carrito[i].name+"</td>        <td class='column-3'><h5><b class='pricechange-"+carrito[i].id+"'>$</b><b>"+carrito[i].price+"</b></h5></td>        <td class='column-4'>          <div class='wrap-num-product flex-w m-l-auto m-r-0'>            <div onclick='return buttonDown(this,"+carrito[i].id+")' data-id="+carrito[i].id+" class='btn-num-product-down cl8 hov-btn3 trans-04 flex-c-m'>              <i class='fs-16 zmdi zmdi-minus'></i>            </div>            <input disabled class='mtext-104 cl3 txt-center num-product' type='number' name='num-product1' value='"+carrito[i].cantidad+"'>            <div onclick='return buttonUp(this,"+carrito[i].id+")' data-id="+carrito[i].id+" class='btn-num-product-up cl8 hov-btn3 trans-04 flex-c-m'>              <i class='fs-16 zmdi zmdi-plus'></i>            </div>          </div>          <label class='cantHidden-"+carrito[i].id+"' style='visibility:hidden;position:absolute;'>"+carrito[i].cant+"</label>        </td>        <td class='column-5'><h5><b class='currency-"+carrito[i].id+"'>$</b><b class='dinamicPrice-"+carrito[i].id+"'>"+(parseFloat(carrito[i].price).toFixed(2)*parseFloat(carrito[i].cantidad).toFixed(2)).toFixed(2)+"</b></h5></td>      </tr>"),listPriceTotal+=parseFloat(carrito[i].price)*parseFloat(carrito[i].cantidad);var montototal=(parseFloat(listPriceTotal)+parseFloat($("#coen").text())).toFixed(2);$(".totalDinamicFinal").text(montototal.toString()),$(".subTotalDinamic").text(listPriceTotal.toFixed(2))}function buttonUp(t,a){var i=buscaIdIndice(carrito,a.toString()),r=Number($(t).prev().val());if(r<=parseInt($(".cantHidden-"+a).text()))if((r+=1)<=parseInt($(".cantHidden-"+a).text())){if($(t).prev().val(r),-1!=i){carrito[i].cantidad=r.toString(),$(".dinamicPrice-"+a).text((r*parseFloat(carrito[i].price)).toFixed(2)),localStorage.setItem("carrito",JSON.stringify(carrito));for(var o=JSON.parse(localStorage.getItem("carrito")),e=0,c=0;c<o.length;c++)e+=parseFloat(o[c].price)*parseFloat(o[c].cantidad);$(".subTotalDinamic").text(e.toFixed(2));var n=(parseFloat(e)+parseFloat($("#coen").text())).toFixed(2);$(".totalDinamicFinal").text(n.toString())}}else swal("Ya no hay mas productos"," ","warning")}function buttonDown(t,a){var i=buscaIdIndice(carrito,a.toString()),r=Number($(t).next().val());if(r<=parseInt($(".cantHidden-"+a).text())&&r>=1&&1!=r&&($(t).next().val(r-1),-1!=i)){carrito[i].cantidad=(r-1).toString(),$(".dinamicPrice-"+a).text(((r-1)*parseFloat(carrito[i].price)).toFixed(2)),localStorage.setItem("carrito",JSON.stringify(carrito));for(var o=JSON.parse(localStorage.getItem("carrito")),e=0,c=0;c<o.length;c++)e+=parseFloat(o[c].price)*parseFloat(o[c].cantidad);$(".subTotalDinamic").text(e.toFixed(2));var n=(parseFloat(e)+parseFloat($("#coen").text())).toFixed(2);$(".totalDinamicFinal").text(n.toString())}}function removeItems(t,a){var i=buscaIdIndice(carrito,a.toString());swal({title:"¿Esta seguro de borrar el articulo?",text:carrito[i].name,icon:"warning",buttons:["No","Si"],dangerMode:!0}).then(t=>{t&&(myNewCar=carrito.filter(function(t){return t.id!==a.toString()}),localStorage.setItem("carrito",JSON.stringify(myNewCar)),location.reload(!0))})}
