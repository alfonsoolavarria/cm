$(document).ready(function(){$("#selectFirst").trigger("click"),$("#paymentBox2").click(function(e){swal({title:"¿Está seguro de continuar con la compra?",text:"",icon:"warning",buttons:["No","Si"],dangerMode:!0}).then(e=>{if(e){var i,a="",s="",o="";if($("#optionsRadios1").is(":checked")){if(a="Transferencia",$("#inlineRadio1").is(":checked")&&(s=$("#inlineFormCustomSelect1").val(),o="Nacional"),$("#inlineRadio2").is(":checked")&&(s=$("#inlineFormCustomSelect2").val(),o="Internacional"),""==a||""==s)return swal("Debe seleccionar una forma de pago"," ","warning"),!1;if(-1==["Argentina","Chile","Colombia","España","EspañaBizzum","México","Panamá","Paypal","Perú","Portugal","USA","Banesco","Mercantil","Venezuela"].indexOf(s))return swal("Debe seleccionar una forma de pago"," ","warning"),!1}if($("#optionsRadios2").is(":checked")&&(s="PagoMovil",""==(a="Pago Movil")||"Pago Movil"!=a))return swal("Debe seleccionar una forma de pago"," ","warning"),!1;if(""==a)return swal("Debe seleccionar una forma de pago"," ","warning"),!1;i={Argentina:"USD",Chile:"CLP",Colombia:"COP","España":"EUR","EspañaBizzum":"EUR","México":"MXN","Panamá":"PAB",Paypal:"USD","Perú":"PEN",Portugal:"EUR",USA:"USD",Banesco:"Bs",Mercantil:"Bs",Venezuela:"Bs",PagoMovil:"Bs"}[s],$("#paymentBox2").css("visibility","hidden"),$("#sendUserSection1").css("visibility","hidden"),$("#sendUserSection2").css("visibility","hidden"),$("#preloader").css("visibility","visible");var t=JSON.parse(localStorage.getItem("carrito")),r=JSON.parse(localStorage.getItem("costoenvio")),n=moment().utc().format("YYYY-MM-DD HH:mm");$.post("/orden/entrega/",{pago:a,lugarpago:s,categoria_pago:o,total:$(".totalDinamicFinal2").text(),moneda:i,carrito:JSON.stringify(t),costoenvio:r,start_date:n}).done(function(e){if(200==e.code){setTimeout(function(){window.location.href="/confirmacion"},3e3)}else swal(e.message," ","warning"),$("#preloader").css("visibility","hidden"),$("#paymentBox2").css("visibility","visible"),$("#sendUserSection1").css("visibility","visible"),$("#sendUserSection2").css("visibility","visible")}).fail(function(e){console.log(e.responseText),window.location.href="/"})}})}),$("#sendUserSection1").click(function(e){$("#sendUserSection1").text().trim();if("Editar"==$("#sendUserSection1").text())$("#sendUserSection1").text("Guardar");else{if($("#sendUserSection1").text("Editar"),!($("#2phone").val().length>0))return alertify.error("El teléfono está vacío",2),$("#sendUserSection1").text("Guardar"),!1;if(!($("#rif").val().length>0))return alertify.error("El rif está vacío",2),$("#sendUserSection1").text("Guardar"),!1;if(!($("#name").val().length>0))return alertify.error("El nombre está vacío",2),$("#sendUserSection1").text("Guardar"),!1;if(!($("#apellido").val().length>0))return alertify.error("El apellido está vacío",2),$("#sendUserSection1").text("Guardar"),!1;$.ajax({url:"/profile/",type:"PUT",data:{flagProfileonly:!1,user:$("#flagUser").val(),name:$("#name").val(),lastname:$("#apellido").val(),phone:$("#2phone").val(),rif:$("#rif").val()},success:function(e){200==e.code?alertify.success("Se ha guardado correctamente",2):(alertify.error("Error al editar los datos",2),location.reload(!0))}})}$("#2phone").is(":disabled")?$("#2phone").prop("disabled",!1):$("#2phone").prop("disabled",!0),$("#rif").is(":disabled")?$("#rif").prop("disabled",!1):$("#rif").prop("disabled",!0),$("#name").is(":disabled")?$("#name").prop("disabled",!1):$("#name").prop("disabled",!0),$("#apellido").is(":disabled")?$("#apellido").prop("disabled",!1):$("#apellido").prop("disabled",!0)}),$("#sendUserSection2").click(function(e){$("#sendUserSection2").text().trim();if("Editar"==$("#sendUserSection2").text())$("#sendUserSection2").text("Guardar");else{if($("#sendUserSection2").text("Editar"),!($("#2address").val().length>0))return alertify.error("La dirección está vacía",2),$("#sendUserSection2").text("Guardar"),!1;$.ajax({url:"/profile/",type:"PUT",data:{user:$("#flagUser").val(),flagProfileonly:!0,direction:$("#2address").val(),localphone:$("#localphone").val(),reference:$("#reference").val()},success:function(e){200==e.code?alertify.success("Se ha guardado correctamente",2):(alertify.error("Error al editar los datos",2),location.reload(!0))}})}$("#2address").is(":disabled")?$("#2address").prop("disabled",!1):$("#2address").prop("disabled",!0),$("#reference").is(":disabled")?$("#reference").prop("disabled",!1):$("#reference").prop("disabled",!0),$("#localphone").is(":disabled")?$("#localphone").prop("disabled",!1):$("#localphone").prop("disabled",!0)})}),$(".radio").change(function(){$("#optionsRadios1").is(":checked")?($("#banescoTransf").css("visibility","visible"),$("#banescoTransf").css("position","static"),$("#cuentasTransferencia").css("visibility","visible"),$("#cuentasTransferencia").css("position","static")):($("#banescoTransf").css("visibility","hidden"),$("#banescoTransf").css("position","fixed"),$("#cuentasTransferencia").css("visibility","hidden"),$("#cuentasTransferencia").css("position","fixed")),$("#optionsRadios2").is(":checked")?($("#movilTransf").css("visibility","visible"),$("#movilTransf").css("position","static")):($("#movilTransf").css("visibility","hidden"),$("#movilTransf").css("position","fixed")),$("#optionsRadios3").is(":checked")?($("#paypalTransf").css("visibility","visible"),$("#paypalTransf").css("position","static")):($("#paypalTransf").css("visibility","hidden"),$("#paypalTransf").css("position","fixed")),$("#inlineRadio1").is(":checked")?$("#inlineFormCustomSelect1").prop("disabled",!1):$("#inlineFormCustomSelect1").prop("disabled",!0),$("#inlineRadio2").is(":checked")?$("#inlineFormCustomSelect2").prop("disabled",!1):$("#inlineFormCustomSelect2").prop("disabled",!0)});var listPriceTotal=0,carrito=JSON.parse(localStorage.getItem("carrito")),costo=JSON.parse(localStorage.getItem("costoenvio")),lugar=localStorage.getItem("lugarenvio");if(carrito.length>0){for(var i=0;i<carrito.length;i++)listPriceTotal=(parseFloat(listPriceTotal).toFixed(2)+(parseFloat(carrito[i].price).toFixed(2)*parseFloat(carrito[i].cantidad).toFixed(2)));$("#coenconf").text(costo),$("#lugarE").text(lugar),$(".totalDinamicFinal2").text(parseFloat(parseFloat(listPriceTotal)+parseFloat(costo)).toFixed(2)),$(".subTotalDinamic2").text("$"+listPriceTotal)}else window.location.href="/";$("#action").click(function(e){e.preventDefault(),"fa fa-plus"==$("#minPlus").attr("class")?($(".section1").show(900),$("#minPlus").attr("class","fa fa-minus")):($(".section1").hide(900),$("#minPlus").attr("class","fa fa-plus"))}),$("#action2").click(function(e){e.preventDefault(),"fa fa-plus"==$("#minPlus2").attr("class")?($(".section2").show(900),$("#minPlus2").attr("class","fa fa-minus")):($(".section2").hide(900),$("#minPlus2").attr("class","fa fa-plus"))}),$("#action3").click(function(e){e.preventDefault(),"fa fa-plus"==$("#minPlus3").attr("class")?($(".section3").show(900),$("#minPlus3").attr("class","fa fa-minus")):($(".section3").hide(900),$("#minPlus3").attr("class","fa fa-plus"))});
